<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>INTUITY - Enhanced Reading Interface</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root {
      --bg-primary: #1a2332;
      --bg-secondary: #243447;
      --card-bg: rgba(255, 255, 255, 0.08);
      --card-border: rgba(255, 255, 255, 0.12);
      --accent-gold: #f4a261;
      --accent-teal: #2dd4bf;
      --accent-lime: #32d74b;
      --accent-orange: #ff9500;
      --text-primary: #ffffff;
      --text-secondary: rgba(255, 255, 255, 0.7);
      --text-muted: rgba(255, 255, 255, 0.5);
      --intuity-gold: #ffd54f;
      --intuity-teal: #26a69a;
      --btn-grey: rgba(255, 255, 255, 0.2);
      --space-xs: 0.25rem;
      --space-sm: 0.5rem;
      --space-md: 1rem;
      --space-lg: 1.5rem;
      --space-xl: 2rem;
      --blur: blur(20px);
      --shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
      color: var(--text-primary);
      min-height: 100vh;
      line-height: 1.6;
      overflow-x: hidden;
      padding-bottom: 70px;
    }

    .header { position: sticky; top: 0; z-index: 100; background: rgba(26, 35, 50, 0.9); backdrop-filter: var(--blur); border-bottom: 1px solid var(--card-border); padding: 8px; }
    .header-content { max-width: 600px; margin: 0 auto; display: flex; flex-direction: column; align-items: center; text-align: center; }
    .brand-name { font-family: 'Space Grotesk', sans-serif; font-size: 2.5rem; font-weight: 700; background: linear-gradient(135deg, var(--intuity-gold) 0%, var(--intuity-teal) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 4px; }

    .passage-container { background: rgba(255, 255, 255, 0.03); border: 1px solid var(--card-border); border-radius: 1rem; padding: var(--space-xl); margin: var(--space-xl) var(--space-lg); line-height: 1.8; font-size: 1.05rem; position: relative; box-shadow: var(--shadow); backdrop-filter: var(--blur); transition: all 0.3s ease; }
    .passage-container.blurred { filter: blur(2px); opacity: 0.7; }
    .passage-paragraph { margin-bottom: var(--space-lg); }

    .answer-highlight { background: var(--accent-lime) !important; color: #000 !important; font-weight: 600 !important; padding: 2px 6px; border-radius: 6px; transition: all 0.3s ease; }

    .question-bubble { position: fixed; bottom: 70px; left: 6px; right: 6px; background: var(--card-bg); backdrop-filter: var(--blur); border-radius: 12px; padding: 0.75rem; box-shadow: var(--shadow); max-height: 40vh; overflow-y: auto; font-size: 0.75rem; z-index: 50; border: 1px solid var(--card-border); }
    .nav-buttons { display: flex; justify-content: center; gap: 0.3rem; margin-bottom: 0.6rem; }
    .nav-btn-question { background: var(--btn-grey); border: none; border-radius: 50%; width: 1.5rem; height: 1.5rem; display: flex; align-items: center; justify-content: center; color: #fff; font-weight: 600; font-size: 0.7rem; cursor: pointer; transition: all 0.2s ease; }
    .nav-btn-question.active, .nav-btn-question.answered { background: var(--accent-lime); color: #000; }

    .question-text { font-weight: 600; margin-bottom: 0.5rem; color: var(--accent-gold); font-size: 0.8rem; }
    .options-container { display: grid; gap: 0.25rem; }
    .option { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 6px; padding: 0.4rem; cursor: pointer; transition: 0.3s; font-size: 0.75rem; display: flex; align-items: center; gap: 0.4rem; }
    .option-label { background: var(--btn-grey); color: #fff; font-weight: 700; font-size: 0.65rem; width: 1.2rem; height: 1.2rem; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }

    .option.correct-answer { background: var(--accent-lime) !important; color: #000 !important; font-weight: 600 !important; border-color: var(--accent-lime) !important; }
    .option.correct-answer .option-label { background: #000 !important; color: var(--accent-lime) !important; }
    .option.user-incorrect { background: var(--accent-orange) !important; color: #fff !important; font-weight: 600 !important; border-color: var(--accent-orange) !important; }
    .option.user-incorrect .option-label { background: #fff !important; color: var(--accent-orange) !important; }
    .option.answer-key { background: var(--accent-lime) !important; color: #000 !important; font-weight: 600 !important; border-color: var(--accent-lime) !important; }
    .option.answer-key .option-label { background: #000 !important; color: var(--accent-lime) !important; }

    .swipe-panel-container { position: fixed; bottom: 0; left: 0; right: 0; height: 100vh; pointer-events: none; z-index: 200; display: none; }
    .swipe-panel-container.visible { display: block; pointer-events: all; }
    .answer-review-panel { position: absolute; bottom: 110px; left: 12px; right: 12px; height: 400px; background: var(--card-bg); backdrop-filter: var(--blur); border-radius: 12px; padding: 16px; box-shadow: var(--shadow); border: 1px solid var(--card-border); transform: translateY(100%); transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); overflow-y: auto; }
    .answer-review-panel.visible { transform: translateY(0); }
    .review-title { color: var(--accent-gold); font-weight: 700; font-size: 0.9rem; margin-bottom: 12px; }

    .review-option { margin: 3px 0; font-size: 0.7rem; color: rgba(255,255,255,0.8); display: flex; align-items: center; padding: 2px 0; border-radius: 6px; }
    .review-option-label { background: rgba(255,255,255,0.2); padding: 2px 6px; border-radius: 4px; margin-right: 8px; font-weight: 600; font-size: 0.65rem; min-width: 20px; text-align: center; flex-shrink: 0; }

    .footer { position: fixed; bottom: 0; left: 0; right: 0; background: var(--card-bg); backdrop-filter: var(--blur); display: flex; justify-content: space-around; align-items: center; padding: 0.6rem 0.4rem; box-shadow: var(--shadow); z-index: 50; border-top: 1px solid var(--card-border); }
    .footer button { flex: 1; margin: 0 0.2rem; background: var(--btn-grey); border: none; border-radius: 8px; padding: 0.6rem 0.4rem; color: #fff; font-size: 0.8rem; font-weight: 600; cursor: pointer; transition: background 0.3s; }
    .footer button:hover { background: var(--accent-lime); color: #000; }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-content">
      <div class="brand-name">INTUITY</div>
    </div>
  </header>

  <div class="passage-container" id="passage-content">
    <div class="passage-paragraph">The rapid advancement of <span id="answer-1">digital technology has fundamentally transformed</span> education in the <span id="answer-5">21st century</span>.</div>
    <div class="passage-paragraph"><span id="answer-2">Educational institutions worldwide</span> have embraced various forms of technology.</div>
    <div class="passage-paragraph">However, the shift to digital education <span id="answer-3">is not without its challenges</span>.</div>
    <div class="passage-paragraph">Research suggests that <span id="answer-4">when properly implemented, digital tools</span> can <span id="answer-6">enhance learning outcomes</span>.</div>
  </div>

  <div class="question-bubble">
    <div class="nav-buttons" id="nav-buttons"></div>
    <div class="question-text" id="question-text">Loading question...</div>
    <div class="options-container" id="options-container"></div>
  </div>

  <div class="swipe-panel-container" id="swipe-panel">
    <div class="answer-review-panel" id="answer-review-panel">
      <div class="review-title">ðŸ“‹ Complete Question Review</div>
      <div id="review-content"></div>
    </div>
  </div>

  <div class="footer">
    <button onclick="showScore()">Score</button>
    <button onclick="checkAnswers()">Check Answers</button>
    <button onclick="showKey()">Key</button>
  </div>

  <script>
    const readingData = {
      questions: [
        { id: 1, text: "What is transforming education?", options: ["Books", "Technology", "Sports"], correct: 1 },
        { id: 2, text: "Who embraced technology?", options: ["Teachers only", "Institutions worldwide", "Students only"], correct: 1 },
        { id: 3, text: "What concern exists?", options: ["Too many exams", "Challenges of digital", "No internet"], correct: 1 },
        { id: 4, text: "What helps outcomes?", options: ["Proper use of digital tools", "Skipping class", "Old methods only"], correct: 0 },
        { id: 5, text: "What century is mentioned?", options: ["20th", "21st", "22nd"], correct: 1 },
        { id: 6, text: "What is being enhanced?", options: ["Sports", "Entertainment", "Learning outcomes"], correct: 2 }
      ]
    };

    let currentQuestion = 1;
    let userAnswers = {};
    let currentMode = 'normal';

    const navButtons = document.getElementById('nav-buttons');
    readingData.questions.forEach((q) => {
      const btn = document.createElement('button');
      btn.className = 'nav-btn-question';
      btn.textContent = q.id;
      btn.onclick = () => loadQuestion(q.id);
      navButtons.appendChild(btn);
    });

    function loadQuestion(id) {
      currentQuestion = id;
      const q = readingData.questions[id - 1];
      document.getElementById('question-text').textContent = q.text;

      document.querySelectorAll('.nav-btn-question').forEach((btn, index) => {
        btn.classList.remove('active','answered');
        if (index + 1 === id) btn.classList.add('active');
        if (userAnswers[index + 1] !== undefined) btn.classList.add('answered');
      });

      const optionsContainer = document.getElementById('options-container');
      const labels = ['A', 'B', 'C', 'D'];

      optionsContainer.innerHTML = q.options.map((opt, i) => {
        let optionClass = 'option';
        if (userAnswers[id] === i) optionClass += ' selected';
        if (currentMode === 'check') {
          if (i === q.correct) optionClass += ' correct-answer';
          if (userAnswers[id] === i && i !== q.correct) optionClass += ' user-incorrect';
        } else if (currentMode === 'key') {
          if (i === q.correct) optionClass += ' answer-key';
        }
        return `<div class="${optionClass}" onclick="selectOption(${i})"><span class="option-label">${labels[i]}</span>${opt}</div>`;
      }).join('');
    }

    function selectOption(index) {
      if (currentMode === 'check' || currentMode === 'key') return;
      userAnswers[currentQuestion] = index;
      loadQuestion(currentQuestion);
    }

    function createEnhancedReviewContent() {
      const reviewContent = document.getElementById('review-content');
      const labels = ['A', 'B', 'C', 'D'];

      reviewContent.innerHTML = readingData.questions.map((q) => {
        const optionsHtml = q.options.map((option, index) => {
          let optionClass = "review-option";
          if (currentMode === 'check') {
            if (index === q.correct) optionClass += " correct-answer";
            if (userAnswers[q.id] === index && index !== q.correct) optionClass += " user-incorrect";
          }
          if (currentMode === 'key') {
            if (index === q.correct) optionClass += " answer-key";
          }
          return `<div class="${optionClass}"><span class="review-option-label">${labels[index]}</span>${option}</div>`;
        }).join('');

        return `<div class="answer-review-item"><div class="review-question">Q${q.id}: ${q.text}</div>${optionsHtml}</div>`;
      }).join('');
    }

    function checkAnswers() {
      currentMode = 'check';
      loadQuestion(currentQuestion);
      createEnhancedReviewContent();
      document.getElementById('swipe-panel').classList.add('visible');
      document.getElementById('answer-review-panel').classList.add('visible');
    }

    function showKey() {
      currentMode = 'key';
      loadQuestion(currentQuestion);
      createEnhancedReviewContent();
      document.getElementById('swipe-panel').classList.add('visible');
      document.getElementById('answer-review-panel').classList.add('visible');
    }

    function showScore() {
      let score = 0;
      let total = readingData.questions.length;
      readingData.questions.forEach((q) => { if (userAnswers[q.id] === q.correct) score++; });
      alert(`ðŸŽ¯ Your Score: ${score}/${total}`);
    }

    document.addEventListener('DOMContentLoaded', () => loadQuestion(1));
  </script>
</body>
</html>
